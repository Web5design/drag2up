[ΕΓΚΑΤΑΣΤΑΣΗ εδώ] (https: / / chrome.google.com / επεκτάσεις / λεπτομέρεια / bjgjolhpdlgebodaapdafhdnikagbfll) <== ίσως ό, τι θέλετε να κάνετε


Εντάξει, έτσι τώρα θα πάω να γράψω ένα επίφαση μιας έκδοσης. Ας ελπίσουμε ότι, υπάρχει πραγματικά δεν είναι τόσο πολύ να διαβάσετε, αυτό το έργο είναι ο πηγαίος κώδικας πίσω από το απείρως τρομερή επέκταση drag2up (για έλλειψη ένα καλύτερο όνομα). Ήταν σε ένα up2drag/updrag σημείο και τώρα ανελκυστήρα / αεροτομή ακούγεται σαν μια αρκετά αξιοπρεπή, αν undescriptive όνομα. Είτε έτσι είτε αλλιώς, μπλα μπλα μπλα, είναι εδώ μια readme.

# # # Drag2up v2

drag2up v2 είναι ένα σημαντικό επανασυγγραφή των codebase drag2up. Το σενάριο περιεχόμενο έχει συνταχθεί με μια νέα, πιο αξιόπιστη, ελεγχόμενη, και ο λογικός σχεδιασμός. Τώρα είναι ομοιόμορφη σε κορνίζες και επεξεργάσιμο καρέ. Είναι άλλαξαν τη στήριξη των νέων άμεσων αρχιτεκτονική, ένα ευρύ φάσμα των εφαρμογών web, animation και πολλά άλλα.

Οι πιο ριζοσπαστικές αλλαγές είναι αλλού, στο φόντο της σελίδας και τη νέα σελίδα επιλογών. Αντί για σκληρό κωδικοποιούνται φιλοξενεί για imgur και GitHub, υπάρχει μια διαισθητική σελίδα drag-drop επιλογές όπου φιλοξενεί όπως Dropbox, CloudApp, Imageshack, Pastebin, hotfile, Imgur και GitHub μπορεί να συρθεί σε αντίστοιχες θέσεις ρύθμισης.

Dropbox, CloudApp, hotfile και Imageshack βασίζονται σε xhr.sendMultipart λειτουργία που επιτρέπει την αποστολή αρχείων μέσω XHR. Αυτή η συνάρτηση επί του παρόντος λειτουργεί μόνο σε Chrome 9.0 + που υποστηρίζει Array Προσκρουστήρες και δακτυλογραφημένες σειρές. Ο proxy server πλευρά θα μπορούσε να κατασκευαστεί για να proxy αυτά τα αιτήματα.


# # # # Απλουστευμένο τρόπο με τον οποίο λειτουργεί πράγματα (φοβερό site / btw βιβλίου)

1. περιεκτικότητα σε σενάριο αποδίδει dragstart (ή μήπως είναι dragenter) εκδήλωση. δοκιμασία για το αν το γεγονός είναι ένα αρχείο έλξη που βασίζεται στις ιδιότητες των τύπων χαρακτηριστικού για dataTransfer. όταν είναι ενεργοποιηθεί, postMessage να window.top ένα μήνυμα που λέει ότι το σύρσιμο έχει αρχίσει.
2. σχετικά με την window.top παράδειγμα σενάριο περιεχομένου, αφού η έλξη αρχίσει μηνύματα, να αρχίσει μια "στάλα" μήνυμα όπου μπορείτε postMessage σε όλα τα άμεσα προσβάσιμες πλαίσια για αναδρομικά προσπαθήσει να κάνει το ρυάκι. Κάθε κόμβος που λαμβάνει το μήνυμα που θέτει το isDragging μεταβλητή για την πραγματική και βρόχους με όλα τα στοιχεία σχετικά με την σελίδα ανίχνευση ποια είναι droppable. καταστήσει τους στόχους της.
3. Λιωμένο στόχοι είναι divs με στρογγυλεμένες γωνίες και μια διαφανή πράσινο φόντο. Στις hover, αλλάζει την αδιαφάνεια. Όταν έρθει η πτώση, το χρώμα γίνεται μπλε. Ένα μήνυμα έχει σταλεί μέσω postMessage στη σελίδα κορυφή πρώτα τις ιδιότητες αρχείου που περιγράφει, το όνομα, το μέγεθος, τον τύπο. Στη συνέχεια, το αρχείο είναι και ένα άλλο μήνυμα έχει σταλεί συμπεριλαμβανομένης της διεύθυνσης URL base64-των στοιχείων που κωδικοποιούνται περιεχομένων του αρχείου.
4. Η αρχή σελίδας χρησιμοποιεί chrome.extension.sendRequest να επικοινωνούν με το φόντο της σελίδας
5. __ (Στιγμιαία) __ Η σελίδα αιτήματα πράγματα στο παρασκήνιο με το API drag2up.appspot.com προκειμένου να δημιουργηθεί μια νέα αποστολή, τα καταστήματα της πυρηνικής κωδικούς εκτόξευσης που επιστρέφονται, και στέλνει το επανάκλησης.
__ (Αργός) __ Το φόντο της σελίδας σας περιμένει για το αρχείο, επιλέγει το κατάλληλο υποδοχής με βάση τα στοιχεία localStorage και filetype μαντέψουν τη χρήση mimetypes και άλλα μαγικά. Το αρχείο είναι στη συνέχεια φορτωθεί στον κεντρικό υπολογιστή, και ο σύνδεσμος απάντηση αποστέλλεται στον επανάκλησης.
6. η απάντηση είναι έρεε αργά κάτω σε όλα τα πλαίσια των οποίων η αρμόδια ακροατή αποστέλλεται για να προσθέσετε το url / link / εικόνα σε ένα στοιχείο.

7. __ (Στιγμιαία) __ Η σελίδα φόντο παίρνει το δεύτερο μήνυμα με το περιεχόμενο αρχείου, διαλέγει μια σειρά με βάση τα στοιχεία, filetype, και τις ρυθμίσεις, προσθήκες στον κεντρικό υπολογιστή, και παίρνει το url.
8. __ (Στιγμιαία) __ Η διεύθυνση του φιλοξενούντος, το αρχείο αποστέλλεται στη συνέχεια μέσω του API drag2up.appspot.com ξανά για να ολοκληρώσει το upload, όπου οι εκδηλώσεις για την api κανάλι αποστολή να ειδοποιούν άμεσα το άκουσμα downloaders ότι το αρχείο είναι διαθέσιμο για download.
